<?xml version="1.0"?>
<robot name="crustcrawler" xmlns:xacro="http://www.ros.org/wiki/xacro">
    
    <xacro:include filename="$(find crustcrawler_description)/urdf/materials.urdf.xacro" />
    <xacro:include filename="$(find crustcrawler_description)/urdf/crustcrawler.gazebo" />
    <!--macro name="the_arm" params="parent *origin"-->
        <!-- ****** JOINT DEFINITIONS ****** -->    
        <!-- Arm's base joint -->
        <link name="world"/> 
        <!-- Arm's base joint -->
        <joint name="arm_base_joint" type="fixed">
            <parent link="world"/> 
            <child link="link_joint_1"/>
        </joint>    
        
        <!-- joint 1 -->
        <joint name="joint_1" type="revolute" >
            <origin xyz="0 0 0.055" rpy="0 0 0" />
            <parent link="link_joint_1" />
            <child link="link_joint_2"/>
            
            <axis xyz="0 0 1"/>
            <limit  lower="-1.8" upper="2.3" effort="300" velocity="1.17" />
        </joint>

        <!-- joint 2 -->
        <joint name="joint_2" type="revolute" >
            <origin xyz="0 -0.06 0.06" rpy="0 0 0" />
            <parent link="link_joint_2" />
            <child link="connector_1"/>
            
            <axis xyz="0 1 0"/>
            <limit  lower="-1.6" upper="1.6" effort="300" velocity="1.17" />
        </joint>

        <!-- Fixed joint between connector_1 and the first girder -->
        <joint name="connector_1_girder_1_joint" type="fixed">
            <origin xyz="0 0 0.036" rpy="0 0 0" />
            <parent link="connector_1"/>
            <child link="link_girder_1"/>
        </joint>

        <!-- Fixed joint between first girder joint_3 -->
        <joint name="girder_1_joint_3_joint" type="fixed">
            <origin xyz="0 0 0.127" rpy="0 0 0" />
            <parent link="link_girder_1"/>
            <child link="link_joint_3"/>
        </joint>


        <!-- joint 3 -->
        <joint name="joint_3" type="revolute" >
            <origin xyz="0 0 0.06" rpy="0 0 0" />
            <parent link="link_joint_3" />
            <child link="connector_2"/>
            
            <axis xyz="0 1 0"/>
            <limit  lower="-1.6" upper="1.6" effort="300" velocity="1.17" />
        </joint>

        <!-- Fixed joint between connector_2 and link_girder_2 -->
        <joint name="connector_2_girder_2_joint" type="fixed">
            <origin xyz="0 0 0.036" rpy="0 0 0" />
            <parent link="connector_2"/>
            <child link="link_girder_2"/>
        </joint>

        <!-- Fixed joint between second girder joint_4 -->
        <joint name="girder_2_joint_4_joint" type="fixed">
            <origin xyz="0 0 0.0635" rpy="0 0 0" />
            <parent link="link_girder_2"/>
            <child link="link_joint_4"/>
        </joint>

        <!-- joint 4 -->
        <joint name="joint_4" type="revolute" >
            <origin xyz="0 0 0.06" rpy="0 0 0" />
            <parent link="link_joint_4" />
            <child link="link_joint_5"/>
            
            <axis xyz="0 0 1"/>
            <limit  lower="-2.5" upper="2.5" effort="300" velocity="1.17" />
        </joint>

        <!-- joint 5 -->
        <joint name="joint_5" type="revolute" >
            <origin xyz="0 -0.024 0.044" rpy="0 0 0" />
            <parent link="link_joint_5" />
            <child link="connector_3"/>
            
            <axis xyz="0 1 0"/>
            <limit  lower="-1.6" upper="1.6" effort="300" velocity="1.17" />
        </joint>

        <!-- Fixed joint between connector_3 and joint_6 -->
        <joint name="connector_3_joint_6_joint" type="fixed">
            <origin xyz="0 0 0.0305" rpy="0 0 0" />
            <parent link="connector_3"/>
            <child link="link_joint_6"/>
        </joint>

        <!-- joint 6 -->
        <joint name="joint_6" type="revolute" >
            <origin xyz="0 0 0.053" rpy="0 0 0" />
            <parent link="link_joint_6" />
            <child link="link_gripper_base"/>
            
            <axis xyz="0 0 1"/>
            <limit  lower="-2.5" upper="2.5" effort="300" velocity="1.17" />
        </joint>

        <!-- Gripper right finger joint -->
        <joint name="right_finger_joint" type="revolute">
            <origin xyz="0.02 -0.02 0.04" rpy="0 0 0" />
            <parent link="link_gripper_base"/>
            <child link="link_right_finger" />
            
            <axis xyz="0 0 1"/>
            <!-- From 14 to -45 degrees -->
            <limit  lower="-0.838576116" upper="0.245436912" effort="300" velocity="1.17" />
        </joint>
        
        <!-- Gripper left finger joint -->
        <joint name="left_finger_joint" type="revolute">
            <origin xyz="0.02 0.02 0.04" rpy="0 0 0" />
            <parent link="link_gripper_base"/>
            <child link="link_left_finger" />
            
            <axis xyz="0 0 1"/>
            <!-- From 14 to -45 degrees -->
            <limit  lower="-0.838576116" upper="0.245436912" effort="300" velocity="1.17" />
        </joint>


        <!-- ****** LINK DEFINITIONS ****** -->      
        <link name="link_joint_1">
            <inertial>
                <mass value="0.125" />
                <origin xyz="0 0 0.00893364" rpy="0 0 0" />
                <inertia ixx="1.0" ixy="0.0" ixz="0.0"
                         iyy="1.0" iyz="0.0" 
                         izz="1.0" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_1.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_1.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_joint_2">
            <inertial>
                <mass value="0.425" />
                <origin xyz="0 0 0" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.055" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_2.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.055" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_2.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="connector_1">
            <inertial>
                <mass value="0.05" />
                <origin xyz="0 0 0.02" rpy="0 0 0" />
                <inertia ixx="0.0" ixy="0.0" ixz="0.0"
                         iyy="0.0" iyz="0.0" 
                         izz="0.0" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.115" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/connecter_joint_2_girder_1.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.115" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/connecter_joint_2_girder_1.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_girder_1">
            <inertial>
                <mass value="0.037" />
                <origin xyz="0 0 0.06" rpy="0 0 0" />
                <inertia ixx="0.0" ixy="0.0" ixz="0.0"
                         iyy="0.0" iyz="0.0" 
                         izz="0.0" />
            </inertial>
            
            <visual>
                <origin xyz="-0.0153 0 0.118" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/link_50.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="-0.0153 0 0.118" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/link_50.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_joint_3">
            <inertial>
                <mass value="0.195612" />
                <origin xyz="0 0 0.025" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.118" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_3.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.118" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_3.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="connector_2">
            <inertial>
                <mass value="0.05" />
                <origin xyz="0 0 0.02" rpy="0 0 0" />
                <inertia ixx="0.0" ixy="0.0" ixz="0.0"
                         iyy="0.0" iyz="0.0" 
                         izz="0.0" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.34" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/connecter_joint_3_girder_2.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.34" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/connecter_joint_3_girder_2.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_girder_2">
            <inertial>
                <mass value="0.037" />
                <origin xyz="0 0 0.06" rpy="0 0 0" />
                <inertia ixx="0.0" ixy="0.0" ixz="0.0"
                         iyy="0.0" iyz="0.0" 
                         izz="0.0" />
            </inertial>
            
            <visual>
                <origin xyz="-0.0153 0 0.341" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/link_25.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="-0.0153 0 0.341" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/link_25.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_joint_4">
            <inertial>
                <mass value="0.187107" />
                <origin xyz="0 0 0.04" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.34" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_4.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.34" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_4.dae"/>
                </geometry>
            </collision>
        </link>
        
        <link name="link_joint_5">
            <inertial>
                <mass value="0.0963884" />
                <origin xyz="0 0 0.03" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.5" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_5.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.5" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_5.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="connector_3">
            <inertial>
                <mass value="0.05" />
                <origin xyz="0 0 0.02" rpy="0 0 0" />
                <inertia ixx="0.0" ixy="0.0" ixz="0.0"
                         iyy="0.0" iyz="0.0" 
                         izz="0.0" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.542" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/connecter_joint_5_joint_6.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.542" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/connecter_joint_5_joint_6.dae"/>
                </geometry>
            </collision>
        </link>
        
        <link name="link_joint_6">
            <inertial>
                <mass value="0.0963884" />
                <origin xyz="0 0 0.02" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.565" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_6.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.565" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/joint_6.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_gripper_base">
            <inertial>
                <mass value="0.15" />
                <origin xyz="0 0 0.04" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0 0.627" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/gripper_base.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0 0.627" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/gripper_base.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_right_finger">
            <inertial>
                <mass value="0.02" />
                <origin xyz="0 0 0.04" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 -0.018 0.668" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/arm_right_finger.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 -0.018 0.668" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/arm_right_finger.dae"/>
                </geometry>
            </collision>
        </link>

        <link name="link_left_finger">
            <inertial>
                <mass value="0.02" />
                <origin xyz="0 0 0.04" rpy="0 0 0" />
                <inertia ixx="-0.000007" ixy="0.0" ixz="0.0"
                         iyy="-0.000003" iyz="-0.000003" 
                         izz="-0.000004" />
            </inertial>
            
            <visual>
                <origin xyz="0 0.018 0.668" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/arm_left_finger.dae"/>
                </geometry>
            </visual>
            
            <collision>
                <origin xyz="0 0.018 0.668" rpy="0 0 0" />
                <geometry>
                    <mesh filename="package://crustcrawler_description/meshes/collada/arm_left_finger.dae"/>
                </geometry>
            </collision>
        </link>


        <!-- ****** TRANSMISSION DEFINITIONS ****** -->
        <transmission name="joint_1_trans" > 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="joint_1">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="joint_1_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
    	    </actuator>
        </transmission>

        <transmission name="joint_2_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="joint_2">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="joint_2_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <transmission name="joint_3_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="joint_3">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="joint_3_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <transmission name="joint_4_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="joint_4">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="joint_4_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <transmission name="joint_5_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="joint_5">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="joint_5_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <transmission name="joint_6_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="joint_6">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="joint_6_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <transmission name="right_finger_joint_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="right_finger_joint">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="right_finger_joint_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <transmission name="left_finger_joint_trans"> 
            <type>pr2_mechanism_model/SimpleTransmission</type>
            <joint name="left_finger_joint">
                <hardwareInterface>EffortJointInterface</hardwareInterface>
    	    </joint>
            <actuator name="left_finger_joint_motor">
      		<hardwareInterface>EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
    

    <!--/macro-->
</robot>
